# Alt Space 🕹🏠
![readme_0530](https://github.com/user-attachments/assets/c8a69501-7861-4aa0-9c67-9ad75c8a6f4a)

<div align="center">

### 🎞 시연 영상

<br>

### ❤ 알트 스페이스 팀
|<a href="https://github.com/kungfugay">이예진(PM)|<a href="https://github.com/linea89kr">이황수(PL)|<a href="https://github.com/kimbugeon">김부건|<a href="https://github.com/imyukyung">임유경|<a href="https://github.com/jwpark-99">박정우|
|:---:|:---:|:---:|:---:|:---:|
|<img src="https://avatars.githubusercontent.com/u/121864128?v=4" width="100">|<img src="https://avatars.githubusercontent.com/u/34230941?v=4" width="100">|<img src="https://avatars.githubusercontent.com/u/55525567?v=4" width="100">|<img src="https://avatars.githubusercontent.com/u/202033529?s=130&v=4" width="100">|<img src="https://avatars.githubusercontent.com/u/192863504?v=4" width="100">|

<br>

### 🛠 기술 스택  
| 분류       | 기술 스택 |
| ---------- | ---------- |
| **개발 언어** | ![Java](https://img.shields.io/badge/Java-007396?style=flat&logo=oracle&logoColor=white) ![HTML](https://img.shields.io/badge/HTML5-E34F26?style=flat&logo=html5&logoColor=white) ![CSS](https://img.shields.io/badge/CSS3-1572B6?style=flat&logo=css3&logoColor=white) ![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=javascript&logoColor=black) |
| **프레임워크 & 라이브러리** | ![Spring Boot](https://img.shields.io/badge/Spring%20Boot-6DB33F?style=flat&logo=springboot&logoColor=white) ![MyBatis](https://img.shields.io/badge/MyBatis-BB1A1A?style=flat&logo=MyBatis&logoColor=white) ![JSP](https://img.shields.io/badge/JSP-007396?style=flat&logo=java&logoColor=white) ![Bootstrap](https://img.shields.io/badge/Bootstrap-7952B3?style=flat&logo=bootstrap&logoColor=white) |
| **IDE** | ![IntelliJ IDEA](https://img.shields.io/badge/IntelliJ-000000?style=flat&logo=intellijidea&logoColor=white) |
| **협업 도구** | ![Discord](https://img.shields.io/badge/Discord-5865F2?style=flat&logo=discord&logoColor=white) ![Zoom](https://img.shields.io/badge/Zoom-2D8CFF?style=flat&logo=zoom&logoColor=white) ![Google Drive](https://img.shields.io/badge/Google%20Drive-4285F4?style=flat&logo=googledrive&logoColor=white) ![Git](https://img.shields.io/badge/Git-F05032?style=flat&logo=Git&logoColor=white) ![Github](https://img.shields.io/badge/Github-181717?style=flat&logo=Github&logoColor=white) |
| **DB** | ![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=flat&logo=mysql&logoColor=white) |
| **API** | ![Gemini AI](https://img.shields.io/badge/Gemini%20AI-FF6F61?style=flat) |
| **서버 배포** | ![NCP](https://img.shields.io/badge/Naver%20Cloud-03C75A?style=flat&logo=naver&logoColor=white) |

</div>

# 1. 개요
## 1.1 프로젝트 개발 기간
2025.03.26. ~ 2025.05.26.

## 1.2 프로젝트 주제
```
비정형적 공간을 대상으로 한 웹 기반 공간 대여 플랫폼
```

## 1.3 기획의도 및 차별점
본 프로젝트는 기존의 공간 대여 플랫폼과 유사한 기능을 기반으로 하되, **호스트와 클라이언트(사용자)를 명확히 분리한 이중 구조의 시스템**을 통해 **사용성과 데이터 기반 경험을 극대화**하는 것을 목표로 기획되었습니다.  

### 💡 **기획 의도**  
- 호스트와 클라이언트 간의 역할 구분을 명확히 하여, 양쪽 사용자 모두에게 최적화된 인터페이스와 기능을 제공함으로써 플랫폼 사용의 효율성과 만족도를 높이고자 했습니다.
- 단순 예약 시스템을 넘어서 개인의 여행 스타일과 성향을 파악할 수 있도록 하여, **반복 방문을 유도하고 개인화된 여행 경험을 제공**하는 것을 핵심 방향으로 설정했습니다.
  
### 🔍 **차별점**  
**1. 호스트 전용 페이지 제공**  
   - 숙박시설 업로드, 관리, 수정 등의 기능을 통합적으로 제공하고,  
   - 조회수, 예약 수, 선호도 등의 통계 데이터를 시각화하여 제공함으로써, 호스트가 자신만의 마케팅 전략을 수립할 수 있도록 지원합니다.

**2. 사용자 맞춤형 '마이 페이지' 시스템**  
   - **내가 작성한 리뷰, 예약 내역, 찜 목록을 기반으로 AI가 여행 취향을 분석하고 시각적으로 보여줍니다.**  
   - 이를 통해 사용자 스스로도 자신의 여행 스타일을 인지할 수 있으며, 추천 숙소, 테마 여행 등에 자연스럽게 연결되도록 유도합니다.

**3. 사용자 경험 중심의 구조 설계**  
   - 단순 숙소 검색 / 예약이 아닌, 데이터 기반의 취향 분석과 호스트 운영 통계 제공이라는 양방향 가치 제공을 통해 기존 플랫폼과 차별화된 심화 경험을 제공합니다.

## 1.4 프로젝트 업무 분장

|담당자|업무|
|:----:|----|
|<a href="https://github.com/kungfugay">이예진|[**게스트 & 호스트**] <br>- 회원가입/로그인/비밀번호 재설정 <br>- 웹소켓 1:1 채팅 기능 <br> [**호스트**] <br> - 공간 CRUD 페이지 구현 <br> - 리뷰 CRUD 페이지 구현 <br> - 결제 내역 조회 페이지 구현 <br> - 예약 캘린더 (고도화) 구현 <br>- 호스트 비즈니스 로직에 필요한 모든 Rest API |
|<a href="https://github.com/kimbugeon">김부건|[**공용**] <br> - NCP 서버 전개 및 배포 <br> - DB 구축 및 ERD 설계 <br> [**게스트**] <br> - 아임포트(iamport) API 활용 결제 · 취소 · 환불 기능 구현 & CRUD 설계 <br> - 카카오 맵 API 활용 숙박시설 위치 기능 구현 <br> - Gemini API 활용 사용자 리뷰 요약 기능 구현 <br> - NCP Papago API 활용 사용자 리뷰 다국어 번역 기능 구현 <br> - Client 페이지 Img Util 활용 이미지 업로드, 수정, 삭제 구현 & CRUD 설계 <br> - 서버 및 스트립트 유효성 검사 <br> - 찜 목록(위시리스트) 기능 구현 & CRUD 설계 <br> - 사용자 리뷰 기능 구현 & CRUD 설계 <br> - 숙박시설 상세보기 페이지 / 마이페이지(나의 예약 / 나의 리뷰 / 찜 목록) 페이지 / 리뷰 업로드 페이지 구현 |

## 1.5 프로젝트 관리 템플릿
- [깃허브 프로젝트](https://github.com/orgs/mc-team-two/projects/9)
- [깃허브 이슈](https://github.com/mc-team-two/altspace/issues)
- [Discord](https://discord.gg/BvPUVb4k)
- [Google Drive](https://drive.google.com/drive/folders/13tLna9244HiX4T5478tl90hapI7bvmfs)
  
<br><br>

# 2. 설계

## 2.1 서비스 흐름도
<div align="center">
  <img width="60%" src="https://github.com/user-attachments/assets/9c2b7f28-db66-49d5-9fb0-e1dd4e6ed7b2"/>
</div>
<br><br>

## 2.2 DB 설계 (ERD)
<img width="100%" src="https://github.com/user-attachments/assets/22f70e1f-817f-4bdc-a3ff-9cff406ebe9e"/>

```
총 10개의 테이블을 기반으로 하는 ERD를 작성하였다.
사용자 활동을 중심으로 한 데이터 추적 및 연관성 확보의 용이를 위해 사용자 중심(User-centric) 구조로 설계되었으며,
핵심 엔티티로 기능하는 테이블은 사용자(Users)와 공간(Accommodations) 테이블이다.
```

<br><br>

## 2.3 화면 흐름도
<div align="center">
  <img width="60%" src="https://github.com/user-attachments/assets/a40bf190-1302-4796-988d-642b1e3c59dd"/>
  <img width="90%" src="https://github.com/user-attachments/assets/ac02cc95-2208-4af3-9329-1ba09bcb4e8e"/>
</div>
<br><br>

# 3. 구현
## 3.1 실제 구현된 시스템 구성도
![diagram](https://github.com/user-attachments/assets/bae440a7-839a-41a1-bc1e-6e1f01caa394)

![Web_App_Reference_Architecture2](https://github.com/user-attachments/assets/004dd548-0943-4ef1-9a41-81541ea069b5)


## 3.2 실행 결과 스크린샷
### 	🧳🙋‍♂️ 게스트 페이지
<details>
  <summary>홈 > 반응형 동작 (확대)</summary>

  ![Image](https://github.com/user-attachments/assets/c3d5fc58-4997-4663-bc47-a41bf2e9c027)

</details>

<details>
  <summary>홈 > 반응형 동작 (축소)</summary>

  ![Image](https://github.com/user-attachments/assets/7a92e5cb-e368-4ddf-8f03-306dc4e41437)

</details>

<details>
  <summary>홈 > 번역 (영어)</summary>

  ![Image](https://github.com/user-attachments/assets/907e0d75-68f4-4c12-92e0-ac6f7f02d61c)

</details>

<details>
  <summary>홈 > 번역 (일본어)</summary>

  ![Image](https://github.com/user-attachments/assets/95fbda4a-f57a-4f8e-8c6a-f8979bdba6fe)

</details>

<details>
  <summary>홈 > 번역 (일본어)</summary>

  ![Image](https://github.com/user-attachments/assets/95fbda4a-f57a-4f8e-8c6a-f8979bdba6fe)

</details>

<details>
  <summary>홈 > 검색</summary>

  ![Image](https://github.com/user-attachments/assets/85767241-a492-40cb-8be3-8eae7d95cc66)

</details>

<details>
  <summary>홈 > 인기 숙소(gemini)</summary>

  ![Image](https://github.com/user-attachments/assets/1b1c40e4-6de8-487d-877d-cbc5952ce398)

</details>

<details>
  <summary>홈 > AI 챗봇 (gemini)</summary>

  ![Image](https://github.com/user-attachments/assets/6620b334-ee97-4a5f-91cc-aa5ff6e721f5)

</details>

<details>
  <summary>홈 > 푸터</summary>

  ![Image](https://github.com/user-attachments/assets/77e08d05-a1b6-4598-859b-527b96d26803)

</details>

<details>
  <summary>페이지 정보 (알트스페이스란?)</summary>

  ![Image](https://github.com/user-attachments/assets/96a561d4-eb44-4538-a384-5840cca68b32)

</details>

<details>
  <summary>고객센터 > 문의</summary>

  ![Image](https://github.com/user-attachments/assets/283302e0-027e-4139-a698-4a17a3d498ab)

</details>

<details>
  <summary>고객센터 > FAQ (홈)</summary>

  ![Image](https://github.com/user-attachments/assets/c248819d-0015-4ea7-a046-2b0c83048c8e)

</details>

<details>
  <summary>마이페이지 > 로그인</summary>

  ![Image](https://github.com/user-attachments/assets/2da40651-c473-47ce-be87-4576e3f1bb9c)

</details>

<details>
  <summary>마이페이지 > AI 사용자 분석</summary>

  ![Image](https://github.com/user-attachments/assets/f425862a-29e5-4836-b2ec-c8a741772e91)

</details>

<details>
  <summary>마이페이지 > 예약, 결제 내역</summary>

  ![Image](https://github.com/user-attachments/assets/211ae8ae-94b6-457a-835e-af98fc6eb968)

</details>

<details>
  <summary>마이페이지 > 리뷰 내역</summary>

  ![Image](https://github.com/user-attachments/assets/4337c626-970f-4a2b-bc1f-26a597d4526a)

</details>

<details>
  <summary>마이페이지 > 나의 정보 (수정)</summary>

  ![Image](https://github.com/user-attachments/assets/d281de16-d850-4954-a1ae-e30f7e194b98)

</details>


### 	🏠🧑 호스트 페이지
<details>
  <summary>메인 대쉬보드</summary>

  ![3-2-대쉬보드(스크롤)](https://github.com/user-attachments/assets/2aa6f6ae-81bd-4cd4-bc47-d9d9edb47dc1)

</details>
<details>
  <summary>스페이스 관리 > 내 스페이스 (리스트)</summary>

![내스페이스스크롤](https://github.com/user-attachments/assets/82a546b1-bd34-4cac-9bf7-7afb65ef9a3d)


</details>
<details>
  <summary>스페이스 관리 > 내 스페이스 (상세보기 모달)</summary>

 ![4-1-스페이스조회](https://github.com/user-attachments/assets/f3c22860-d540-4cab-8f27-b75cffffaa0b)

</details>
<details>
  <summary>스페이스 관리 > 내 스페이스 > 스페이스 등록(수정) </summary>

![수정등록 스크롤](https://github.com/user-attachments/assets/9a604f20-c9b4-40c7-95c8-990d4475786b)


</details>
<details>
  <summary>스페이스 관리 > 내 스페이스 > 예약 캘린더 </summary>

![6-예약캘린더](https://github.com/user-attachments/assets/c3fe2a47-f725-464f-9069-0aa4e482cc84)

</details>
<details>
  <summary>결제 내역 > 결제 내역 조회</summary>

![3-결제내역](https://github.com/user-attachments/assets/ee4e0d7d-1700-45fd-b88f-c7c733e8a0d2)

</details>
<details>
  <summary>호스트 센터 > 운영 가이드</summary>
  
![7-운영가이드](https://github.com/user-attachments/assets/0be6eba3-b544-4037-b4c6-a6b405a6e7df)

</details>
<details>
  <summary>호스트 센터 > 고객 메시지</summary>

![고객메시지창](https://github.com/user-attachments/assets/58988c13-86c0-4300-8734-8d218d37c751)

</details>
<details>
  <summary>리뷰 관리 > 작성된 리뷰 조회</summary>

![8-리뷰조회(스크롤)](https://github.com/user-attachments/assets/3a6535f9-c20f-4de8-bcd4-046e2f4312b0)

</details>
<details>
  <summary>마이페이지 > 회원정보 변경</summary>

![9-1-마이페이지](https://github.com/user-attachments/assets/ccc7c5ad-42a2-4efd-9017-f9aa8ae96514)

</details>
<details>
  <summary>마이페이지 > 비밀번호 변경 </summary>

  ![9-2-비밀번호재설정](https://github.com/user-attachments/assets/15262dc3-afa1-4486-b4c7-fdaa67093f2c)

</details>


### 👥 공통 페이지 스크린샷
<details>
  <summary>회원가입</summary>

  ![1_회원가입](https://github.com/user-attachments/assets/98b9ef1a-b53d-4b56-aae7-c77f8020250e)

</details>
<details>
  <summary>로그인</summary>

![2-2-로그인](https://github.com/user-attachments/assets/a9ca7d61-9857-408f-a564-0d73c4a98fd6)

</details>
<details>
  <summary>계정찾기</summary>

![2-1-계정찾기](https://github.com/user-attachments/assets/b9572680-cf98-4d4b-91a6-abdb52a34168)

</details>

<br><br>

# 4. 트러블슈팅
|    👤 name     |         🐞 Issues          |       🧠 Problem Solving                |     🔗 Linked Issue            |
|:-------:|:-----------------:|:--------------------------------------------------------------------------------------------:|:------------------------:|
|  이예진  | WebSocket 실시간 메시지에서 시간 처리 문제 | 클라이언트와 서버의 타입 불일치로 인해 시간이 표시되지 않았고, Jackson 역직렬화 에러가 발생하여 ISO 8601로 바꾸어 해결했지만, 후속 이슈인 KST-UTC 시간대 불일치 문제는 DTO에서 시간 타입을 String으로 변경하고 formatTime()으로 변환하는 것으로 해결하였다.  | [💬](https://github.com/mc-team-two/altspace/issues/148) |
|  〃  | 유저 탈퇴가 안되는 문제 | 유저의 PK를 FK로 사용하는 테이블의 제약 조건으로 인해서 참조하는 원본 데이터의 삭제를 거부하는 문제였다. DELETE문을 사용하는 대신 유저 테이블의 칼럼에 deleted_at을 추가하여 탈퇴한 회원을 구분할 수 있도록 구현하였다. | [💬](https://github.com/mc-team-two/altspace/issues/255) |
| 이황수  |       히트맵 시각화 구현        | 백엔드에서 전달받은 한글 주소 데이터를 자바스크립트 코드 내에서 파싱하고, Google Geochart가 인식할 수 있도록 해당 지역의 영문 이름으로 변환하는 매핑 로직을 추가했습니다. 특히, 한국 지역의 표준 영문 표기를 확인하기 위해 ISO 3166-2:KR 표준의 'local variant' 값을 직접 참고하여 정확한 매핑 데이터를 구축하고 적용했습니다. | [💬](https://github.com/mc-team-two/altspace/pull/250) |
|  〃  |    캐러셀 구현중 EL 태그 충돌|            자바스크립트 코드를 별도의 `.js` 파일로 분리하여 역할 분담을 명확히 했습니다.<br/>캐러셀의 기본 뼈대(컨테이너, `carousel-inner`, 버튼 등)는 HTML 마크업으로 미리 정의해두고, 자바스크립트로는 API 호출을 통해 받아온 데이터만을 해당 HTML 요소에 채워 넣는 방식으로 로직을 변경했습니다. | [💬](https://github.com/mc-team-two/altspace/pull/250) |
|  〃  | Gemini 분석을 이용한 고객 유형 분석 |                                                                없는 유형을 자꾸 넣는 문제가 있어, 프롬프트를 강화하고, 유형들을 열거한 뒤, 꼭 이 유형 안에서만 설명하도록 프롬프트를 추가했습니다.                                                                | [💬](https://github.com/mc-team-two/altspace/pull/253) |
|  임유경  | JSP에서 사진 파일이 업로드되지 않는 문제 | DTO 클래스의 필드가 String 타입으로 되어 있는데, JSP 폼에서는 <input type="file">을 통해 MultipartFile로 파일이 전달되어 매핑이 안 되어 생긴 오류로 DTO 클래스의 이미지 관련 필드를 MultipartFile로 바꾼 뒤 컨트롤러에서 MultipartFile을 받아 서버에 저장하고 해당 경로를 DB에 저장하는 형태로 해결함.   | [💬](https://github.com/mc-team-two/altspace/issues/86) |
|  〃  | 스페이스 수정 페이지에서 Kakao 지도 마커가 초기 위치로만 설정되는 문제 | 수정 페이지에서 기존에 저장된 위도/경도 값을 마커 위치로 설정하려 했지만, JavaScript 내에서 JSP 변수 (${space.latitude} 등)가 올바르게 바인딩되지 않아 지도가 기본 중심 좌표만 표시되고 마커가 설정되지 않음. parseFloat(${space.latitude}) 등으로 정확히 숫자 변환하고, JavaScript에서 해당 값을 받아 마커 위치와 중심 좌표에 적용함.   | [💬](https://github.com/mc-team-two/altspace/issues/51) |
|  〃  | 예약 달력(FullCalendar)에 모든 스페이스 예약이 표시되지 않는 문제 | 기존에는 특정 스페이스 ID만 기준으로 예약 정보를 조회했기 때문에 전체 예약이 달력에 표시되지 않았었으나, 컨트롤러를 수정하여 모든 스페이스의 예약을 조회한 뒤 JSON으로 전달하고, FullCalendar의 이벤트 소스를 해당 데이터로 통합함으로써 모든 예약 정보가 하나의 달력에 표시되도록 개선함.  | [💬](https://github.com/mc-team-two/altspace/issues/108) |
|  〃  | 기간 필터(1개월/3개월 등) 버튼 클릭 시 결제 내역이 필터링되지 않는 문제 | DataTables에서 사용자 정의 필터를 사용하기 위해 버튼 클릭 시 시작일/종료일을 hidden input에 설정하고, DataTables의 draw()를 호출해야 했는데, 초기 구현에서는 hidden input이 없거나 DataTables의 custom filtering 콜백이 누락되어 작동하지 않았었음. 버튼 클릭 시 날짜를 설정하고, DataTables의 $.fn.dataTable.ext.search.push를 사용하여 해결함.   | [💬](https://github.com/mc-team-two/altspace/issues/191) |
| 김부건 |       아임포트 결제 안정성 확보를 위한 imp_uid 누락, 금액 불일치, 취소 제한, 예외 처리 이슈 대응        | imp_uid 누락으로 결제 취소 실패가 반복되던 문제 해결을 위해 imp_uid를 DB에 저장하도록 쿼리 및 테이블 구조를 수정. 또한, 금액 불일치 시 자동 취소 로직을 추가하여 보안성 강화.  체크인 2일 전까지만 취소 가능하도록 날짜 조건을 추가하고, 각 처리 단계마다 예외 상황에 대한 응답 메시지를 명확히 정의하여 사용자 피드백 및 안정성 개선. | [💬](https://github.com/mc-team-two/altspace/pull/69) |
|  〃  |       Gemini 활용 리뷰 요약 XSS 보안 이슈 발생 및 성능 저하        | 기존 코드에서는 API 응답(getResult)을 innerHTML로 통째로 삽입하고 있었음.(XSS 보안 이슈 발생)  innerHTML 대신 document.createElement()와 textContent를 사용해 각 줄마다 <p> 요소로 분리하여 HTML 해석 없이 텍스트로 렌더링 또한, appendChild를 활용하여 부분적 DOM 갱신만 수행하여 성능 이슈도 개선. | [💬](https://github.com/mc-team-two/altspace/pull/196) |
|  〃   |       client 리뷰 수정/삭제 시 동일한 이미지 파일명이 중복 업로드·삭제되는 문제 발생        | 리뷰 이미지 업로드/수정/삭제 시 동일한 파일명이 겹칠 경우 발생하는 충돌 문제를 방지하고, 사용자가 선택한 이미지에만 정확하게 작업되도록 UUID 기반의 고유한 파일명 체계를 도입. | [💬](https://github.com/mc-team-two/altspace/pull/150) |
| 박정우 | 고객센터, 홈의 UI 요소 간 간격 불일치 문제 | 고객센터 페이지에서 상담 요청 칸과 우측 사이드바 사이의 간격이 일정하지 않고, 헤더 영역에서는 현재 날씨 정보, 로그아웃 버튼, 다크모드 버튼이 상하좌우로 어색하게 배열되어 사용자 경험을 저해하는 UI 불균형이 발생하였습니다. 또한, 푸터 영역에서도 콘텐츠 사이의 간격 및 정렬이 다소 어색하게 보이는 문제가 확인되었습니다. 그래서 HTML 내부의 <style> 태그를 활용하여 각 섹션의 마진과 정렬 기준을 명확히 설정하였습니다. 헤더 영역에는 display: flex와 gap 속성으로 아이템 간의 정렬을 통일하고, font-size: clamp()를 통해 반응형 폰트 크기를 적용하였습니다. FAQ 영역에서는 이미지 및 텍스트 요소에 margin-top/bottom을 적용하여 시각적 흐름을 개선하였습니다. 푸터 영역에는 컬럼 간 margin-top과 콘텐츠 간 margin-bottom을 설정하였습니다. | [💬](https://github.com/mc-team-two/altspace/pull/215) |
| 〃 | 부트스트랩 템플릿 커스터마이징 시 레이아웃 문제 | 템플릿에서 불필요한 요소 제거 및 수정 후 레이아웃이 무너졌거나 의도치 않은 여백이 발생했습니다. 삭제한 요소가 기존 템플릿의 레이아웃 구조(container → row → col)에 포함되어 있었던 것을 확인하고, DOM 구조 분석을 통해 해당 요소의 제거가 전체 레이아웃에 미치는 영향을 파악하였습니다. 이를 기반으로 레이아웃이 무너지지 않도록 필요한 컨테이너 구조를 유지하거나 재구성하여 시각적으로 어색하지 않도록 조정하였습니다. | [💬](https://github.com/mc-team-two/altspace/issues/126) |


