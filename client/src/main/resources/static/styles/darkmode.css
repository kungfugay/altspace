/* 다크모드 스위치 개선 CSS */
/*==============================================================================*/
/*=========================== 기본 테마 및 보색 지정 ==============================*/
/*==============================================================================*/

:root {
    --bg-color: #f5f5f5; /* 기본 밝은 모드 배경색 */
    --text-color: #333; /* 기본 밝은 모드 텍스트 색상 */
    --switch-bg-light: #f0f0f0; /* 스위치 배경색 (라이트 모드) */
    --switch-bg-dark: #333; /* 스위치 배경색 (다크 모드) */
    --switch-icon-color: #fa9e1b; /* 스위치 아이콘 색상 (주요 테마 색상과 일치) */
}

[data-theme="dark"] {
    --bg-color: #121212; /* 다크 모드 배경색 */
    --text-color: #f5f5f5; /* 다크 모드 텍스트 색상 */
}

body {
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s, color 0.3s; /* 부드러운 전환 효과 */
}

/* about 페이지에서는 intro가 home 밑 부분을 장악하고 있어서 이쪽을 타도록 커스텀.*/
.intro {
    background-color: var(--bg-color);
    transition: background-color 0.3s;
}

.blog {
    background-color: var(--bg-color);
    transition: background-color 0.3s;
}

.header,
.main_nav {
    transition: background-color 0.3s;
}

.offer_reviews_title,
.sorting_text,
.sidebar_title,
.intro_title,
.intro_text {
    color: var(--text-color);
}

/* 다크 모드일 때 모든 드롭다운 메뉴 버튼 텍스트 색상 변경 */
[data-theme="dark"] .offers_sorting > li > ul {
    background-color: var(--bg-color);
    color: var(--text-color);
}

[data-theme="dark"] .offers_sorting > li > ul > li > span {
    background-color: var(--bg-color);
    color: var(--text-color);
}

/* 마우스 오버 시 텍스트 색상 등 추가 스타일 */
.offers_sorting > li > ul > li:hover > span {
    color: #fa9e1b; /* 테마 주요 색상과 일치 */
}

/* 헤더 최상단 바는 다크모드 영향을 받지 않도록 수정 */
.top_bar span {
    color: white !important;
}

/*==============================================================================*/
/*==================== 개선된 다크모드 토글 스위치 스타일 =======================*/
/*==============================================================================*/

/* 상단바 사용자 박스 컨테이너 */
.user_box {
    display: flex;
    align-items: center;
    height: 36px; /* 일관된 높이 지정 */
}

.user_box_login {
    display: flex;
    align-items: center;
    margin-left: 10px;
    height: 100%; /* 부모 높이를 상속 */
}

/* 사용자 링크 스타일 */
.user_box_link a {
    display: flex;
    align-items: center;
    height: 100%;
    padding: 0 10px;
}

/* 테마 스위치 컨테이너 */
.theme-switch {
    display: flex;
    align-items: center;
    height: 100%; /* 다른 메뉴 항목과 동일한 높이 */
    margin-left: 10px;
}

/* 스위치 토글 라벨 */
.theme-toggle {
    position: relative;
    display: inline-block;
    width: 28px; /* 토글 너비 축소 */
    height: 28px; /* 토글 높이 축소 */
    margin: 0; /* 여백 제거 */
    cursor: pointer;
}

/* 체크박스 숨김 */
.theme-toggle input {
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
}

/* 토글 슬라이더 (아이콘 배경) */
.slider {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--switch-bg-light);
    border-radius: 50%;
    transition: all 0.3s ease;
    width: 28px; /* 슬라이더 너비 */
    height: 28px; /* 슬라이더 높이 */
}

/* 다크 모드일 때 슬라이더 배경색 */
[data-theme="dark"] .slider {
    background-color: var(--switch-bg-dark);
}

/* 슬라이더에 호버 효과 추가 */
.slider:hover {
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
}

/* 아이콘 스타일 통합 */
.moon-icon,
.sun-icon {
    position: absolute;
    font-size: 14px; /* 아이콘 크기 축소 */
    color: var(--switch-icon-color); /* 아이콘 색상 */
    transition: opacity 0.3s;
}

/* 초기 아이콘 상태 */
.moon-icon {
    opacity: 1;
}

.sun-icon {
    opacity: 0;
}

/* 체크 상태에 따른 아이콘 표시 */
input:checked + .slider .moon-icon {
    opacity: 0;
}

input:checked + .slider .sun-icon {
    opacity: 1;
}

/* 다크 모드일 때 챗봇 스타일 변경 */
[data-theme="dark"] #chat-window {
    background-color: var(--bg-color) !important;
    border-color: #444; /* 필요에 따라 테두리 색상 조정 */
    box-shadow: 0 0.15625rem 0.3125rem rgba(255, 255, 255, 0.1); /* 그림자 색상 조정 */
}

[data-theme="dark"] .chat-header {
    /* 배경색 유지를 위해 그대로 둡니다. 필요시 조정 */
    color: white;
}

[data-theme="dark"] #chat-messages {
    background-color: transparent !important; /* 투명 배경 */
}

[data-theme="dark"] .user-message {
    background-color: #0d6efd;; /* 다크 모드에 어울리는 청색 계열 */
    color: var(--text-color);
}

[data-theme="dark"] .bot-message {
    background-color: #424242; /* 다크 모드에 어울리는 회색 계열 */
    color: var(--text-color);
}

[data-theme="dark"] .chat-input {
    background-color: var(--bg-color);
    border-top-color: #444;
}

[data-theme="dark"] #chat-input {
    color: var(--text-color);
    border-color: #444;
}

[data-theme="dark"] #chat-send-btn {
    background-color: #0056b3; /* 호버 시 색상과 대비되도록 약간 어둡게 */
    color: #fff;
}